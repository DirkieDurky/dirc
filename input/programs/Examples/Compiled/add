mov|i1 8191 _ sp # Initialize stack pointer
store|i1|i2 65536 0 _ # Initialize screen pointer
mov sp _ fp # Initialize frame pointer
jump _start _ pc

label printChar
load|i1 0 _ r1
store r0 r1 _
add|i2 r1 1 r1
store|i2 r1 0 _
return _ _ _

label printNewline
load|i1 0 _ r0
sub|i2 r0 256 r0
mod|i2 r0 80 r1
sub r0 r1 r0
add|i2 r0 80 r0
add|i2 r0 256 r0
store|i2 r0 0 _
return _ _ _

label println
push lr _ _
push fp _ _
mov sp _ fp
sub|i2 sp 1 sp
mov fp _ r1
store|i1 0 r1 _
label _println_while0
mov fp _ r1
load r1 _ r2
add r0 r2 r3
load r3 _ r1
ifEq|i2 r1 0 _println_whileEnd0
push r0 _ _
sub|i2 fp 1 r1
load r1 _ r2
mov fp _ r1
load r1 _ r3
add r2 r3 r4
load r4 _ r1
mov r1 _ r0
call printChar _ _
mov r0 _ r1
pop _ _ r0
mov fp _ r1
load r1 _ r2
add|i2 r2 1 r1
mov fp _ r2
store r1 r2 _
jump _println_while0 _ pc
label _println_whileEnd0
push r0 _ _
call printNewline _ _
mov r0 _ r1
pop _ _ r0
mov fp _ sp
pop _ _ fp
pop _ _ lr
return _ _ _

label readKey
read _ _ r0
return _ _ _

label input
push lr _ _
push fp _ _
mov sp _ fp
sub|i2 sp 82 sp
sub|i2 fp 80 r0
store|i1 0 r0 _
call readKey _ _
sub|i2 fp 81 r1
store r0 r1 _
label _input_while0
sub|i2 fp 81 r0
load r0 _ r1
ifEq|i2 r1 5 _input_whileEnd0
sub|i2 fp 81 r0
load r0 _ r1
mov r1 _ r0
call printChar _ _
sub|i2 fp 79 r0
sub|i2 fp 80 r1
load r1 _ r2
add r0 r2 r3
sub|i2 fp 81 r0
load r0 _ r2
store r2 r3 _
sub|i2 fp 80 r0
load r0 _ r1
add|i2 r1 1 r0
sub|i2 fp 80 r1
store r0 r1 _
call readKey _ _
sub|i2 fp 81 r1
store r0 r1 _
jump _input_while0 _ pc
label _input_whileEnd0
sub|i2 fp 79 r0
sub|i2 fp 80 r1
load r1 _ r2
add r0 r2 r3
store|i1 0 r3 _
call printNewline _ _
sub|i2 fp 79 r0
mov fp _ sp
pop _ _ fp
pop _ _ lr
return _ _ _
mov fp _ sp
pop _ _ fp
pop _ _ lr
return _ _ _

label strlen
push lr _ _
push fp _ _
mov sp _ fp
sub|i2 sp 1 sp
mov fp _ r1
store|i1 0 r1 _
label _strlen_while0
mov fp _ r1
load r1 _ r2
add r0 r2 r3
load r3 _ r1
ifEq|i2 r1 0 _strlen_whileEnd0
mov fp _ r1
load r1 _ r2
add|i2 r2 1 r1
mov fp _ r2
store r1 r2 _
jump _strlen_while0 _ pc
label _strlen_whileEnd0
mov fp _ r1
load r1 _ r2
mov r2 _ r0
mov fp _ sp
pop _ _ fp
pop _ _ lr
return _ _ _
mov fp _ sp
pop _ _ fp
pop _ _ lr
return _ _ _

label power
push lr _ _
push fp _ _
mov sp _ fp
sub|i2 sp 2 sp
ifNotEq|i2 r1 0 _math_if0
mov|i1 1 _ r0
mov fp _ sp
pop _ _ fp
pop _ _ lr
return _ _ _
label _math_if0
mov fp _ r2
store r0 r2 _
sub|i2 fp 1 r2
store|i1 0 r2 _
label _math_while0
sub|i2 fp 1 r2
load r2 _ r3
sub|i2 r1 1 r2
ifMoreOrEq r3 r2 _math_whileEnd0
mov fp _ r2
load r2 _ r3
mul r3 r0 r2
mov fp _ r3
store r2 r3 _
sub|i2 fp 1 r2
load r2 _ r3
add|i2 r3 1 r2
sub|i2 fp 1 r3
store r2 r3 _
jump _math_while0 _ pc
label _math_whileEnd0
mov fp _ r2
load r2 _ r3
mov r3 _ r0
mov fp _ sp
pop _ _ fp
pop _ _ lr
return _ _ _
mov fp _ sp
pop _ _ fp
pop _ _ lr
return _ _ _

label stringToInt
push lr _ _
push fp _ _
mov sp _ fp
sub|i2 sp 6 sp
mov fp _ r1
store|i1 0 r1 _
push r0 _ _
sub|i2 fp 6 r1
load r1 _ r2
mov r2 _ r0
call strlen _ _
mov r0 _ r1
pop _ _ r0
sub|i2 fp 1 r2
store r1 r2 _
sub|i2 fp 3 r1
store|i1 0 r1 _
sub|i2 fp 1 r1
load r1 _ r2
sub|i2 fp 4 r1
store r2 r1 _
label _stringToInt_while0
sub|i2 fp 4 r1
load r1 _ r2
ifLess|i2 r2 0 _stringToInt_whileEnd0
sub|i2 fp 4 r1
load r1 _ r2
add r0 r2 r3
load r3 _ r1
sub|i2 fp 2 r2
store r1 r2 _
sub|i2 fp 2 r1
load r1 _ r2
ifLess|i2 r2 48 _stringToInt_condition0
mov|i1 1 _ r1
jump _stringToInt_conditionEnd0 _ pc
label _stringToInt_condition0
mov|i1 0 _ r1
label _stringToInt_conditionEnd0
sub|i2 fp 2 r2
load r2 _ r3
ifMore|i2 r3 57 _stringToInt_condition1
mov|i1 1 _ r2
jump _stringToInt_conditionEnd1 _ pc
label _stringToInt_condition1
mov|i1 0 _ r2
label _stringToInt_conditionEnd1
and r1 r2 r3
ifEq|i2 r3 0 _stringToInt_if0
sub|i2 fp 2 r1
load r1 _ r2
sub|i2 r2 48 r1
sub|i2 fp 5 r2
store r1 r2 _
mov fp _ r1
load r1 _ r2
sub|i2 fp 5 r1
load r1 _ r3
push r0 _ _
push r2 _ _
push r3 _ _
mov|i1 10 _ r0
sub|i2 fp 3 r1
load r1 _ r4
mov r4 _ r1
call power _ _
mov r0 _ r1
pop _ _ r3
pop _ _ r2
pop _ _ r0
mul r3 r1 r4
add r2 r4 r1
mov fp _ r2
store r1 r2 _
sub|i2 fp 3 r1
load r1 _ r2
add|i2 r2 1 r1
sub|i2 fp 3 r2
store r1 r2 _
label _stringToInt_if0
sub|i2 fp 4 r1
load r1 _ r2
sub|i2 r2 1 r1
sub|i2 fp 4 r2
store r1 r2 _
jump _stringToInt_while0 _ pc
label _stringToInt_whileEnd0
mov fp _ r1
load r1 _ r2
mov r2 _ r0
mov fp _ sp
pop _ _ fp
pop _ _ lr
return _ _ _
mov fp _ sp
pop _ _ fp
pop _ _ lr
return _ _ _

label intToString
push lr _ _
push fp _ _
mov sp _ fp
sub|i2 sp 22 sp
push r0 _ _
sub|i2 fp 22 r1
load r1 _ r2
mov r2 _ r0
call getDigitCountInInt _ _
mov r0 _ r1
pop _ _ r0
mov fp _ r2
store r1 r2 _
mov fp _ r1
load r1 _ r2
sub|i2 r2 1 r1
sub|i2 fp 21 r2
store r1 r2 _
sub|i2 fp 20 r1
mov fp _ r2
load r2 _ r3
add r1 r3 r4
store|i1 0 r4 _
label _intToString_while0
ifLessOrEq|i2 r0 0 _intToString_whileEnd0
sub|i2 fp 20 r1
sub|i2 fp 21 r2
load r2 _ r3
add r1 r3 r4
mod|i2 r0 10 r1
add|i2 r1 48 r3
store r3 r4 _
div|i2 r0 10 r1
mov r1 _ r0
sub|i2 fp 21 r1
load r1 _ r2
sub|i2 r2 1 r1
sub|i2 fp 21 r2
store r1 r2 _
jump _intToString_while0 _ pc
label _intToString_whileEnd0
sub|i2 fp 20 r1
mov r1 _ r0
mov fp _ sp
pop _ _ fp
pop _ _ lr
return _ _ _
mov fp _ sp
pop _ _ fp
pop _ _ lr
return _ _ _

label getDigitCountInInt
push lr _ _
push fp _ _
mov sp _ fp
sub|i2 sp 1 sp
mov fp _ r1
store|i1 1 r1 _
ifLess|i2 r0 10000000000000000 _intToString_if0
mov fp _ r1
load r1 _ r2
add|i2 r2 16 r1
mov fp _ r2
store r1 r2 _
div|i2 r0 10000000000000000 r1
mov r1 _ r0
label _intToString_if0
ifLess|i2 r0 100000000 _intToString_if1
mov fp _ r1
load r1 _ r2
add|i2 r2 8 r1
mov fp _ r2
store r1 r2 _
div|i2 r0 100000000 r1
mov r1 _ r0
label _intToString_if1
ifLess|i2 r0 10000 _intToString_if2
mov fp _ r1
load r1 _ r2
add|i2 r2 4 r1
mov fp _ r2
store r1 r2 _
div|i2 r0 10000 r1
mov r1 _ r0
label _intToString_if2
ifLess|i2 r0 100 _intToString_if3
mov fp _ r1
load r1 _ r2
add|i2 r2 2 r1
mov fp _ r2
store r1 r2 _
div|i2 r0 100 r1
mov r1 _ r0
label _intToString_if3
ifLess|i2 r0 10 _intToString_if4
mov fp _ r1
load r1 _ r2
add|i2 r2 1 r1
mov fp _ r2
store r1 r2 _
label _intToString_if4
mov fp _ r1
load r1 _ r2
mov r2 _ r0
mov fp _ sp
pop _ _ fp
pop _ _ lr
return _ _ _
mov fp _ sp
pop _ _ fp
pop _ _ lr
return _ _ _

label print
push lr _ _
push fp _ _
mov sp _ fp
sub|i2 sp 1 sp
mov fp _ r1
store|i1 0 r1 _
label _print_while0
mov fp _ r1
load r1 _ r2
add r0 r2 r3
load r3 _ r1
ifEq|i2 r1 0 _print_whileEnd0
mov fp _ r1
load r1 _ r2
add r0 r2 r3
load r3 _ r1
ifNotEq|i2 r1 10 _print_else0
push r0 _ _
call printNewline _ _
mov r0 _ r1
pop _ _ r0
jump _print_ifElseEnd0 _ pc
label _print_else0
push r0 _ _
sub|i2 fp 1 r1
load r1 _ r2
mov fp _ r1
load r1 _ r3
add r2 r3 r4
load r4 _ r1
mov r1 _ r0
call printChar _ _
mov r0 _ r1
pop _ _ r0
label _print_ifElseEnd0
mov fp _ r1
load r1 _ r2
add|i2 r2 1 r1
mov fp _ r2
store r1 r2 _
jump _print_while0 _ pc
label _print_whileEnd0
mov fp _ sp
pop _ _ fp
pop _ _ lr
return _ _ _

label _start
sub|i2 sp 30 sp
sub|i2 fp 9 r0
mov r0 _ r1
store|i1 78 r1 _
add|i2 r0 1 r1
store|i1 117 r1 _
add|i2 r0 2 r1
store|i1 109 r1 _
add|i2 r0 3 r1
store|i1 98 r1 _
add|i2 r0 4 r1
store|i1 101 r1 _
add|i2 r0 5 r1
store|i1 114 r1 _
add|i2 r0 6 r1
store|i1 32 r1 _
add|i2 r0 7 r1
store|i1 49 r1 _
add|i2 r0 8 r1
store|i1 58 r1 _
add|i2 r0 9 r1
store|i1 0 r1 _
call println _ _
call input _ _
call stringToInt _ _
sub|i2 fp 10 r1
store r0 r1 _
sub|i2 fp 20 r0
mov r0 _ r1
store|i1 78 r1 _
add|i2 r0 1 r1
store|i1 117 r1 _
add|i2 r0 2 r1
store|i1 109 r1 _
add|i2 r0 3 r1
store|i1 98 r1 _
add|i2 r0 4 r1
store|i1 101 r1 _
add|i2 r0 5 r1
store|i1 114 r1 _
add|i2 r0 6 r1
store|i1 32 r1 _
add|i2 r0 7 r1
store|i1 50 r1 _
add|i2 r0 8 r1
store|i1 58 r1 _
add|i2 r0 9 r1
store|i1 0 r1 _
call println _ _
call input _ _
call stringToInt _ _
sub|i2 fp 21 r1
store r0 r1 _
sub|i2 fp 10 r0
load r0 _ r1
mov r1 _ r0
call intToString _ _
call print _ _
sub|i2 fp 25 r0
mov r0 _ r1
store|i1 32 r1 _
add|i2 r0 1 r1
store|i1 43 r1 _
add|i2 r0 2 r1
store|i1 32 r1 _
add|i2 r0 3 r1
store|i1 0 r1 _
call print _ _
sub|i2 fp 21 r0
load r0 _ r1
mov r1 _ r0
call intToString _ _
call print _ _
sub|i2 fp 29 r0
mov r0 _ r1
store|i1 32 r1 _
add|i2 r0 1 r1
store|i1 61 r1 _
add|i2 r0 2 r1
store|i1 32 r1 _
add|i2 r0 3 r1
store|i1 0 r1 _
call print _ _
sub|i2 fp 10 r0
load r0 _ r1
sub|i2 fp 21 r0
load r0 _ r2
add r1 r2 r0
call intToString _ _
call println _ _
halt _ _ _